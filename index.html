<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resource Hub</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Grain overlay -->
  <div class="grain"></div>

  <!-- Loading overlay -->
  <div id="loadingOverlay" style="
    position:fixed;inset:0;z-index:9998;
    background:var(--bg);
    display:flex;align-items:center;justify-content:center;
    flex-direction:column;gap:16px;
  ">
    <div style="width:40px;height:40px;border:3px solid var(--border2);border-top-color:var(--blue);border-radius:50%;animation:spin 0.8s linear infinite;"></div>
    <p style="color:var(--text-muted);font-size:15px;">Connecting to databaseâ€¦</p>
  </div>

  <!-- Header -->
  <header class="site-header">
    <div class="header-inner">

      <!-- Logo + Title -->
      <div class="header-brand">
        <div class="header-logo-wrap">
          <img
            src="https://traxxisgps.com/wp-content/uploads/elementor/thumbs/Traxxis-refresh-logo_horizontal-min-1-qjgvd5cr9kxu5eay6trn10pbylz31ardqnqdluuew0.webp"
            alt="Company Logo"
            class="header-logo"
            id="companyLogo"
            onerror="this.style.display='none'; document.getElementById('logoFallback').style.display='flex';"
          />
          <div class="logo-fallback" id="logoFallback">
            <span class="logo-fallback-dot logo-fallback-dot--blue"></span>
            <span class="logo-fallback-dot logo-fallback-dot--orange"></span>
          </div>
        </div>
        <div class="header-divider"></div>
        <h1 class="header-title">Resource Hub</h1>
      </div>

      <!-- Actions -->
      <div class="header-actions">
        <div class="search-wrapper">
          <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
          </svg>
          <input type="text" id="searchInput" class="search-input" placeholder="Search resourcesâ€¦" autocomplete="off" />
          <button class="search-clear" id="searchClear" title="Clear search">âœ•</button>
        </div>

        <!-- Editor-only buttons (hidden for viewers) -->
        <button class="btn btn-outline" id="addSectionBtn" style="display:none;">+ Section</button>
        <button class="btn btn-outline" id="addGroupBtn" style="display:none;">+ Group</button>
        <button class="btn btn-accent" id="addResourceBtn" style="display:none;">+ Resource</button>

        <!-- Edit Key toggle -->
        <button class="btn btn-outline" id="editKeyBtn">ðŸ”‘ Edit Key</button>

        <!-- Theme Toggle -->
        <button class="theme-toggle" id="themeToggle" title="Toggle light / dark mode" aria-label="Toggle theme">
          <svg class="theme-icon theme-icon--sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"/>
            <line x1="12" y1="1" x2="12" y2="3"/>
            <line x1="12" y1="21" x2="12" y2="23"/>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
            <line x1="1" y1="12" x2="3" y2="12"/>
            <line x1="21" y1="12" x2="23" y2="12"/>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
          </svg>
          <svg class="theme-icon theme-icon--moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
      </div>

    </div>
  </header>

  <!-- Main content -->
  <main class="main-content" id="mainContent">
    <div class="empty-state" id="emptyState">
      <div class="empty-icon">â—ˆ</div>
      <p class="empty-title">Nothing here yet</p>
      <p class="empty-sub">Add a section to get started, then fill it with resources.</p>

      <!-- Shown when editor -->
      <div class="empty-actions" id="emptyActionsEditor" style="display:none;">
        <button class="btn btn-outline" id="emptyAddSectionBtn">+ Add Section</button>
        <button class="btn btn-accent" id="emptyAddResourceBtn">+ Add Resource</button>
      </div>

      <!-- Shown when viewer -->
      <div class="empty-actions" id="emptyActionsViewer" style="display:flex;">
        <button class="btn btn-outline" id="emptyEditKeyBtn" onclick="document.getElementById('editKeyBtn').click()">ðŸ”‘ Enter Edit Key to add resources</button>
      </div>
    </div>
  </main>

  <!-- ===== MODAL: Auth / Edit Key ===== -->
  <div class="modal-backdrop" id="authModal" role="dialog" aria-modal="true" aria-labelledby="authModalTitle">
    <div class="modal modal--sm">
      <div class="modal-header">
        <h2 class="modal-title" id="authModalTitle">Enter Edit Key</h2>
        <button class="modal-close" data-close="authModal">âœ•</button>
      </div>
      <div class="modal-body" id="authModalBody">
        <p class="modal-subtext" id="authHint" style="display:none;"></p>
        <label class="field-label" for="authKeyInput">Edit Key</label>
        <input type="password" id="authKeyInput" class="field-input" placeholder="Enter edit keyâ€¦" autocomplete="current-password" />
        <p id="authError" style="color:var(--danger);font-size:13px;min-height:18px;"></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" data-close="authModal">Cancel</button>
        <button class="btn btn-accent" id="authSaveBtn">Unlock</button>
      </div>
    </div>
  </div>

  <!-- ===== MODAL: Add / Edit Resource ===== -->
  <div class="modal-backdrop" id="resourceModal" role="dialog" aria-modal="true" aria-labelledby="resourceModalTitle">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title" id="resourceModalTitle">Add Resource</h2>
        <button class="modal-close" data-close="resourceModal">âœ•</button>
      </div>
      <div class="modal-body">
        <label class="field-label" for="resName">Name</label>
        <input type="text" id="resName" class="field-input" placeholder="e.g. MDN Web Docs" />

        <label class="field-label" for="resUrl">URL</label>
        <input type="url" id="resUrl" class="field-input" placeholder="https://â€¦" />

        <label class="field-label" for="resDesc">Description <span class="field-optional">(optional)</span></label>
        <input type="text" id="resDesc" class="field-input" placeholder="Short descriptionâ€¦" />

        <label class="field-label" for="resTags">Tags <span class="field-optional">(comma separated, optional)</span></label>
        <input type="text" id="resTags" class="field-input" placeholder="e.g. docs, reference, css" />

        <label class="field-label" for="resSection">Section</label>
        <select id="resSection" class="field-select"></select>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" data-close="resourceModal">Cancel</button>
        <button class="btn btn-accent" id="saveResourceBtn">Save Resource</button>
      </div>
    </div>
  </div>

  <!-- ===== MODAL: Add / Edit Section ===== -->
  <div class="modal-backdrop" id="sectionModal" role="dialog" aria-modal="true" aria-labelledby="sectionModalTitle">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title" id="sectionModalTitle">Add Section</h2>
        <button class="modal-close" data-close="sectionModal">âœ•</button>
      </div>
      <div class="modal-body">
        <label class="field-label" for="secName">Section Name</label>
        <input type="text" id="secName" class="field-input" placeholder="e.g. Design Tools" />
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" data-close="sectionModal">Cancel</button>
        <button class="btn btn-accent" id="saveSectionBtn">Save Section</button>
      </div>
    </div>
  </div>

  <!-- ===== MODAL: Add / Edit Group ===== -->
  <div class="modal-backdrop" id="groupModal" role="dialog" aria-modal="true" aria-labelledby="groupModalTitle">
    <div class="modal modal--sm">
      <div class="modal-header">
        <h2 class="modal-title" id="groupModalTitle">Add Group</h2>
        <button class="modal-close" data-close="groupModal">âœ•</button>
      </div>
      <div class="modal-body">
        <p class="modal-subtext">Groups organise resources within a section into collapsible folders.</p>
        <label class="field-label" for="grpSection">Section</label>
        <select id="grpSection" class="field-select"></select>
        <label class="field-label" for="grpName">Group Name</label>
        <input type="text" id="grpName" class="field-input" placeholder="e.g. Quick Links" />
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" data-close="groupModal">Cancel</button>
        <button class="btn btn-accent" id="saveGroupBtn">Save Group</button>
      </div>
    </div>
  </div>

  <!-- ===== MODAL: Move / Copy Resource ===== -->
  <div class="modal-backdrop" id="moveModal" role="dialog" aria-modal="true" aria-labelledby="moveModalTitle">
    <div class="modal modal--sm">
      <div class="modal-header">
        <h2 class="modal-title" id="moveModalTitle">Move / Copy Resource</h2>
        <button class="modal-close" data-close="moveModal">âœ•</button>
      </div>
      <div class="modal-body">
        <p class="modal-subtext" id="moveResourceName"></p>
        <label class="field-label" for="moveTarget">Target Section</label>
        <select id="moveTarget" class="field-select"></select>
        <div class="move-options">
          <label class="radio-label"><input type="radio" name="moveAction" value="move" checked /> Move (remove from current section)</label>
          <label class="radio-label"><input type="radio" name="moveAction" value="copy" /> Copy (keep in current section)</label>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" data-close="moveModal">Cancel</button>
        <button class="btn btn-accent" id="confirmMoveBtn">Confirm</button>
      </div>
    </div>
  </div>

  <!-- ===== CONTEXT MENU ===== -->
  <div class="context-menu" id="contextMenu">
    <button class="ctx-item" id="ctxEdit">âœŽ Edit</button>
    <button class="ctx-item" id="ctxAssignGroup">âŠž Assign Group</button>
    <button class="ctx-item" id="ctxMove">â‡„ Move / Copy</button>
    <button class="ctx-item ctx-danger" id="ctxDelete">âœ• Delete</button>
  </div>

  <!-- ===== MODAL: Assign Group ===== -->
  <div class="modal-backdrop" id="assignGroupModal" role="dialog" aria-modal="true" aria-labelledby="assignGroupModalTitle">
    <div class="modal modal--sm">
      <div class="modal-header">
        <h2 class="modal-title" id="assignGroupModalTitle">Assign to Group</h2>
        <button class="modal-close" data-close="assignGroupModal">âœ•</button>
      </div>
      <div class="modal-body">
        <p class="modal-subtext" id="assignGroupResourceName"></p>
        <label class="field-label" for="assignGroupSelect">Group</label>
        <select id="assignGroupSelect" class="field-select"></select>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" data-close="assignGroupModal">Cancel</button>
        <button class="btn btn-accent" id="confirmAssignGroupBtn">Assign</button>
      </div>
    </div>
  </div>

  <script src="app.js" type="module"></script>

  <style>
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Editor mode button accent */
    .btn-accent-dim {
      background: var(--surface3);
      border: 1.5px solid var(--blue);
      color: var(--blue);
      font-weight: 600;
      font-size: 15px;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
      white-space: nowrap;
      transition: background var(--transition), box-shadow var(--transition);
    }
    .btn-accent-dim:hover {
      background: var(--blue-dim);
      box-shadow: 0 0 14px var(--blue-glow);
    }
  </style>
</body>
</html>